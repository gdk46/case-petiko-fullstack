<!doctype html>
<html lang="pt-br" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Shopping Pet</title>

    <!-- BOX ICONS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">

    <!-- libs -->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;500;700&display=swap" rel="stylesheet"> 

    <!-- Style -->
    <link rel="stylesheet" href="src/assets/css/main.css">
    
  </head>
  <body>
    <main id="root">
      <section class="container d-flex align-items-center justify-content-center">
        <form action="" class="d-flex flex-wrap mt-5">
            <div class="card card-adjust">
                <div class="card-body row g-3">
                    <div class="d-flex align-items-center justify-content-center">
                        <img src="./src/assets/img/user.png" alt="" width="95">
                    </div>
                    
                    <div class="col-12">
                        <label for="name" class="form-label">*Nome</label>
                        <input type="text" class="form-control" id="name" required>
                    </div>
                </div>
            </div>
    
            <div class="card card-adjust">
                <div class="card-body row g-3">
                    <div class="col-12">
                        <label for="cep" class="form-label">*CEP</label>
                        <input type="text" class="form-control" id="cep">
                    </div>

                    <div class="col-12">
                        <label for="address" class="form-label">*Endere√ßo</label>
                        <input type="text" class="form-control" id="address">
                    </div>
    
                    <div class="col-12">
                        <label for="complement" class="form-label">Complemento</label>
                        <input type="text" class="form-control" id="complement">
                    </div>
    
                    <div class="col-12">
                        <label for="district" class="form-label">*Bairro</label>
                        <input type="text" class="form-control" id="district">
                    </div>
    
                    <div class="col-8">
                        <label for="location" class="form-label">*Cidade</label>
                        <input type="text" class="form-control" id="location">
                    </div>
    
                    <div class="col-4">
                        <label for="federative_unit" class="form-label">*UF</label>
                        <input type="text" class="form-control" id="federative_unit">
                    </div>
    
                    <div class="col-12">
                        <button type="button" class="btn btn-bg-template mb-3" id="enviar">
                            Finalizar compra
                        </button>
                    </div>
                </div>
            </div>
          </form>
      </section>
    </main>
    
    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.min.js" integrity="sha512-d4KkQohk+HswGs6A1d6Gak6Bb9rMWtxjOa0IiY49Q3TeFd5xAzjWXDCBW9RS7m86FQ4RzM2BdHmdJnnKRYknxw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Script APP -->
    <script>
        $(document).ready(function() {
            $("#cep").mask("99999-999")
            
            $("#cep").keyup(function() {
                if ($("#cep").length) {
                    let cep = $("#cep");
                    let url = `https://viacep.com.br/ws/${cep}/json/`;
                    $.ajax({
                        url: url,
                        dataType: 'jsonp',
                        crossDomain: true,
                        contentType: "application/json",
                        success: function(json) {
                            if (json.logradouro) {
                                $("#address").val(json.logradouro);
                                $("#complement").val(json.complemento);
                                $("#district").val(json.bairro);
                                $("#location").val(json.localidade);
                                $("#federative_unit").val(json.uf);
                            }
                        }
                    });
                }
            });

            $("#enviar").click(function() {
                event.preventDefault();
                $.ajax({
                    method: "POST",
                    url: "http://127.0.0.1:8181/api/criar/cliente",
                    data: { 
                        name: $("#name").val(),
                        cep: $("#cep").val(),
                        address: $("#address").val(),
                        complement: $("#complement").val(),
                        district: $("#district").val(),
                        location: $("#location").val(),
                        federative_unit: $("#federative_unit").val(),
                    },
                    success: function(data) {
                        alert();
                    }
                }) 
            })    
        })
    </script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
  </body>
</html>